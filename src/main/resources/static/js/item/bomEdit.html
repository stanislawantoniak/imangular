
<div class="container">
	<div class="block-header">
		<h2>{{translator.label.edititemheadingitemcard}}</h2>
	</div>
	<div class="card">
		<div id="profile-main" class="pm-body clearfix">
			<div class="pmb-block">
				<div class="pmbb-header">
					<h2>
						<i class="zmdi zmdi-assignment zmdi-hc-fw"></i>
						{{translator.label.bomEditRecipeHeader}}
						</h3>

						<ul class="actions"
							data-ng-if="!itemCtrl.editItemContext && nav.authService.session.isSupervisor">
							<li class="dropdown" uib-dropdown><a href=""
								uib-dropdown-toggle> <i class="zmdi zmdi-more-vert"></i>
							</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a ng-click="itemCtrl.setEditItemContext()"><i
											class="zmdi zmdi-edit m-r-10"></i>{{translator.label.itemslistitemstableeditbutton}}</a></li>
									<li><a
										ng-if="!itemCtrl.item.isComposed && !itemCtrl.addItemCtx"
										ng-click="itemCtrl.addItemComponent()"><i
											class="zmdi zmdi-plus m-r-10"></i>{{translator.label.editcomponentsbuttonadd}}</a></li>
								</ul></li>
						</ul>
				</div>
				<div id="item-data" class="pmbb-body p-l-30 m-t-20">
					<div class="pmbb-view">
						{{translator.label.bomEditRecipeLabel1}}
						{{bomCtrl.bom.requiredQuantity}}&nbsp;{{translator.label.pcs}}
						{{translator.label.bomEditRecipeLabel2}}
						{{bomCtrl.bom.forItem.name }}
						
					</div>
				</div>
			</div>

			<div id="component-list" class="pmb-block">
				<div class="pmbb-header">
					<h2>
						<i class="zmdi zmdi-assignment zmdi-hc-fw"></i>
						{{translator.label.itemcomponentsheading}}
						</h3>
						<ul class="actions">
							<li class="dropdown" uib-dropdown><a href=""
								uib-dropdown-toggle> <i class="zmdi zmdi-more-vert"></i>
							</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li ng-if="itemCtrl.item.isComposed"><a
										ng-click="itemCtrl.fetchItem()"><i
											class="zmdi zmdi-refresh m-r-10"></i>{{translator.label.userslistheadingbuttonrefresh}}</a></li>
									<li><a ng-if="nav.authService.session.isSupervisor"
										ng-click="itemCtrl.addItemComponent()"><i
											class="zmdi zmdi-plus m-r-10"></i>{{translator.label.editcomponentsbuttonadd}}</a></li>
								</ul></li>
						</ul>
				</div>
				<div class="pmbb-body">
					<table class="table ng-table"
						ng-class="{'table-hover' : !itemCtrl.editRowContext}">
						<thead>
							<tr>
								<th width="5%" ng-if="!itemCtrl.editRowContext"></th>
								<th width="15%">{{translator.label.bomEditComponentLabel}}</th>
								<th width="15%">{{translator.label.bomEditIsComposed}}</th>
								<th width="10%">{{translator.label.bomEditRequiredQuantityLabel}}</th>
								<th width="10%">{{translator.label.bomEditRequiredEffectiveQuantityLabel}}</th>
								<th width="10%">{{translator.label.bomEditInStockQuantityLabel}}</th>
								<th width="15%">{{translator.label.bomEditStockRemarksLabel}}</th>
							</tr>
						</thead>

						<tbody>
							<tr ng-repeat="req in bomCtrl.requirements"
								ng-class="{'active' : rowform.$visible}">
								<td ng-if="!itemCtrl.editRowContext"><button
										class="btn btn-default btn-sm"
										ui-sref="root.itemDetails({id:itemComponent.componentId})">
										<i class="zmdi zmdi-open-in-browser zmdi-hc-fw f-20"></i>
									</button></td>

								<td>{{ req.forItemName }}</td>

								<td><i ng-show="req.forItemIsComposed"
									class="zmdi zmdi-check zmdi-hc-fw"> </i> <i
									ng-hide="req.forItemIsComposed"
									class="zmdi zmdi-minus zmdi-hc-fw"></i></td>

								<td>{{ req.requiredQuantity }}</td>

								<td>{{ req.effectiveRequiredQuantity }}</td>

								<td><a href="#" editable-text="req.inStockQuantity"
									onaftersave="bomCtrl.saveStock(req)" e-only-digits> {{
										req.inStockQuantity }}<i
										ng-show="req.inStockQuantity === null"
										class="zmdi zmdi-edit zmdi-hc-fw"></i>
								</a></td>

								<td><a href="#" editable-textarea="req.stockRemarks"
									onaftersave="bomCtrl.saveStock(req)">{{ req.stockRemarks }}<i
										ng-show="req.stockRemarks === null"
										class="zmdi zmdi-edit zmdi-hc-fw"></i></td>

								<td ng-show="nav.authService.session.isSupervisor">
									<form editable-form name="rowform"
										onshow="itemCtrl.setEditRowContext()"
										onaftersave="itemCtrl.setEditRowContext()"
										onbeforesave="itemCtrl.createOrUpdateItemComponent($data)"
										ng-show="rowform.$visible" class="form-buttons form-inline">

										<button type="submit" ng-disabled="rowform.$waiting"
											class="btn btn-success">
											<i class="zmdi zmdi-check"></i>
										</button>

										<button type="button" ng-disabled="rowform.$waiting"
											ng-click="itemCtrl.cancelEditRow(this)"
											class="btn btn-default">
											<i class="zmdi zmdi-close"></i>
										</button>

									</form>
									<div ng-show="!rowform.$visible && !itemCtrl.editRowContext">
										<button class="btn btn-default" ng-click="rowform.$show()">
											<i class="zmdi zmdi-edit"></i>
										</button>
										<button class="btn btn-default"
											ng-click="itemCtrl.deleteDialog.open(itemComponent)"
											swal-exec swal-object="itemComponent"
											swal-dialog-title="{{translator.label.itemslistdeletecomponentheading +' '+itemComponent.componentName}}?"
											swal-main-text="{{translator.label.itemslistdeletecomponentwarning}}"
											swal-confirm-button="{{translator.label.itemslistitemstablebuttondelete}}"
											swal-cancel-button="{{translator.label.edititembuttoncancel}}"
											swal-exec-fn-on-confirm="itemCtrl.deleteItemComponentPromise"
											growl-on-confirm-success-title="{{translator.label.itemsdeletecomponentsuccessheading}}"
											growl-on-confirm-failure-title="{{translator.label.itemsdeletecomponentfailureheading}}"
											growl-on-cancel-text="{{translator.label.itemdeletecomponentoncancelinfo}}">
											<i class="zmdi zmdi-delete zmdi-hc-fw"></i>
										</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

		</div>

	</div>
	<div class="row m-b-20" ng-if="true">
		<div class="col-sm-12">
			nav.authService.session::{{nav.authService.session}} <br>item::bomCtrl.bom

		</div>
	</div>
</div>