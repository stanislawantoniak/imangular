
<div class="page-title">
	<h2>{{translator.label.userslistheading}}</h2>
</div>

<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">

			<div class="panel-heading">
				<a class="btn btn-default" ng-click="usersCtrl.fetchAllUsers()"><i
					class="fa fa-refresh"></i>
					{{translator.label.userslistheadingbuttonrefresh}}</a>
				<div class="pull-right">
					<a class="btn btn-default" href="#!/users/add/0"> <i
						class="fa fa-plus"></i>
						{{translator.label.userslistheadingbuttonuseradd}}
					</a>
				</div>
			</div>

			<div class="panel-body panel-body-table">
				<table class="table table-striped table-hover table-responsive">
					<thead>
						<tr>
							<th width="10%">
								{{translator.label.userslistuserstableheadingid}}</th>

							<th width="30%">
								{{translator.label.userslistuserstableheadingname}}</th>
							<th width="20%">{{translator.label.edituserlabelroles}}</th>
							<th width="10%">{{translator.label.userslistuserstableheadingenabled}}</th>
							<th width="20%">{{translator.label.userslistuserstableheadingactions}}</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="user in usersCtrl.users">
							<td>{{user.id == 0 ? '-' : user.id}}</td>

							<td><span editable-text="user.username" e-name="username"
								onbeforesave="usersCtrl.checkEmail($data)" e-form="rowform"
								e-required> {{ user.username || 'empty'}} </span></td>

							<td><span editable-checklist="user.rolesSelected"
								e-name="rolesSelected"
								e-ng-options="s.value as s.text for s in ::usersCtrl.allRoles track by s.value"
								e-form="rowform"> {{ user.rolesSelected.join(', ') }} </span></td>

							<td><span editable-radiolist="user.enabled" e-name="enabled"
								e-ng-options="o.value as o.text for o in ::translator.yesno track by o.value"
								e-form="rowform"> {{ user.enabled }} </span></td>

							<td>
								<form editable-form name="rowform"
									onshow="usersCtrl.setEditRowContext()"
									onaftersave="usersCtrl.setEditRowContext()"
									onbeforesave="usersCtrl.createOrUpdateUser($data,user.id)"
									ng-show="rowform.$visible" class="form-buttons form-inline">

									<button type="submit" ng-disabled="rowform.$waiting"
										class="btn btn-default">
										<i class="fa fa-save"></i>
										{{translator.label.edituserbuttonsave}}
									</button>

									<button type="button" ng-disabled="rowform.$waiting"
										ng-click="usersCtrl.cancelEditRow(this)"
										class="btn btn-default">
										<i class="fa fa-undo"></i>
										{{translator.label.edituserbuttoncancel}}
									</button>

								</form>

								<div ng-show="!rowform.$visible && !usersCtrl.editContext">
									<a class="btn btn-default" ng-click="rowform.$show()"><i
										class="fa fa-pencil"></i>
										{{translator.label.userslistuserstablebuttonedit}}
									</a> <a class="btn btn-default"
										ng-click="usersCtrl.deleteDialog.open(user)"><i
										class="fa fa-times"></i>
										{{translator.label.userslistuserstablebuttondelete}}</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<!-- delete dialog-->
<div class="message-box animated fadeIn" id="message-box-default"
	ng-class="usersCtrl.deleteDialog.getClass()">
	<div class="mb-container">
		<div class="mb-middle">
			<div class="mb-title">
				<span class="fa fa-scissors"></span>{{translator.label.userslistdeletewarning}} {{usersCtrl.deleteDialog.object.username}}?
			</div>
			<div class="mb-content">
			</div>
			<div class="mb-footer">
				<button class="btn btn-default btn-lg"
					ng-click="usersCtrl.deleteDialog.close()">{{translator.label.edititembuttoncancel}}</button>
				<button class="btn btn-default btn-lg pull-right"
					ng-click="usersCtrl.deleteUser()">{{translator.label.userslistuserstablebuttondelete}}</button>
			</div>
		</div>
	</div>
</div>